# Import graph
- import_graph:
    from:
      $: "data"
    format: "ECharts"
    type: "directed"
    resolve_coreferences: true
    into: "graph"

# Delete initial data
- delete: "data"

# Get all proper nouns
- filterNodes:
    from:
      $: "graph"
    as: "$node"
    where: "$node.category === 'PROPN'"
    resolve_nodes: true
    into: "proper_nouns"

# Counting POS categories
- reduceNodes:
    from:
      $: "graph"
    as: "$node"
    accumulator: "$categories"
    initialValue: {}
    reduce: "$categories[$node.category] = ($categories[$node.category] || 0) + 1, $categories"
    into: "pos_categories_count"

# Export graph as EChart
- export_graph:
      format: "ECharts"
      from:
          $: "graph"
      into: "chart"

# Export graph (default Graphology format)
- export_graph:
    from:
      $: "graph"
    into: "graph"
